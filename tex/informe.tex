\documentclass[a4paper, 10pt, twoside]{article}

\usepackage[top=1in, bottom=1in, left=1in, right=1in]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[spanish, es-ucroman, es-noquoting]{babel}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage{float}
\usepackage{enumitem} % Provee macro \setlist
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{multicol}
\usepackage[toc, page]{appendix}


%%%%%%%%%% Configuración de Fancyhdr - Inicio %%%%%%%%%%
\pagestyle{fancy}
\thispagestyle{fancy}
\lhead{Trabajo Práctico 1 · Teoría de las Comunicaciones}
\rhead{Delgado · Lovisolo · Petaccio}
\renewcommand{\footrulewidth}{0.4pt}
\cfoot{\thepage /\pageref{LastPage}}

\fancypagestyle{caratula} {
   \fancyhf{}
   \cfoot{\thepage /\pageref{LastPage}}
   \renewcommand{\headrulewidth}{0pt}
   \renewcommand{\footrulewidth}{0pt}
}
%%%%%%%%%% Configuración de Fancyhdr - Fin %%%%%%%%%%


%%%%%%%%%% Miscelánea - Inicio %%%%%%%%%%
% Evita que el documento se estire verticalmente para ocupar el espacio vacío
% en cada página.
\raggedbottom

% Deshabilita sangría en la primer línea de un párrafo.
\setlength{\parindent}{0em}

% Separación entre párrafos.
\setlength{\parskip}{0.5em}

% Separación entre elementos de listas.
\setlist{itemsep=0.5em}

% Asigna la traducción de la palabra 'Appendices'.
\renewcommand{\appendixtocname}{Apéndices}
\renewcommand{\appendixpagename}{Apéndices}
%%%%%%%%%% Miscelánea - Fin %%%%%%%%%%


%%%%%%%%%% Insertar grafo - Inicio %%%%%%%%%%
\newcommand{\grafo}[1]{
  \includegraphics[type=png,ext=.png,read=.png,width=16cm]{#1}
}
%%%%%%%%%% Insertar grafo - Fin %%%%%%%%%%


\begin{document}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Carátula                                                                  %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\thispagestyle{caratula}

\begin{center}

\includegraphics[height=2cm]{DC.png} 
\hfill
\includegraphics[height=2cm]{UBA.jpg} 

\vspace{2cm}

Departamento de Computación,\\
Facultad de Ciencias Exactas y Naturales,\\
Universidad de Buenos Aires

\vspace{4cm}

\begin{Huge}
Trabajo Práctico 1
\end{Huge}

\vspace{0.5cm}

\begin{Large}
Teoría de las Comunicaciones
\end{Large}

\vspace{1cm}

Primer Cuatrimestre de 2014

\vspace{4cm}

\begin{tabular}{|c|c|c|}
\hline
Apellido y Nombre & LU & E-mail\\
\hline
Delgado, Alejandro N.  & 601/11 & nahueldelgado@gmail.com\\
Lovisolo, Leandro      & 645/11 & leandro@leandro.me\\
Petaccio, Lautaro José & 443/11 & lausuper@gmail.com\\
\hline
\end{tabular}

\end{center}

\newpage


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Índice                                                                    %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\tableofcontents

\newpage


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Introducción                                                              %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Introducción téorica}
En este trabajo realizamos un análisis de redes mediante la captura de paquetes ARP.

Address Resolution Protocol (ARP) es un protocolo usado frecuentemente por las redes locales para conectar las capas 3 (capa de red) y 2 (capa de enlace) mediante la conversión o identificación de IP's v4 con direcciones físicas MAC's.

Existen dos tipos de paquetes posibles en el protocolo: paquetes de petición y de respuesta.
\begin{itemize}
	\item Los paquetes de petición (\texttt{who-has}) son enviados mayormente en forma de broadcast con el objetivo de poder localizar la dirección MAC a la cuál le pertenece una IP conocida.
	\item Los paquetes de respuesta (\texttt{is-at}) son enviados de manera uni-cast ya que se utilizan para responder a la máquina que realizó una petición con anterioridad.
\end{itemize}

La estructura de los paquetes ARP es simple, consiste principalmente de los siguientes campos:

\begin{tabular}{| l | p{10cm} |}
	\hline
	Operación & Especifica la operación que el emisor está realizando, 1 para petición, 2 para responder \\ \hline
	Dirección MAC del emisor & \\ \hline
	Dirección IP del emisor & \\ \hline
	Dirección MAC del receptor & Este campo se ignora en las respuestas \\ \hline
	Dirección IP del receptor & \\ \hline
\end{tabular}

\textbf{Ejemplo práctico de su utilización:}

Una máquina en una red quiere mandarle un paquete de datos a otra máquina en la misma red. Para esto, la máquina emisora busca en su tabla local, la dirección MAC asociada a la dirección IP a la cuál quiere mandar el paquete. Si no la encuentra, realiza el broadcasts de la petición ARP, la cual llegará eventualmente, si se encuentra conectada, a la máquina destino. La máquina destino recibirá la petición y la responderá de manera uni-cast hacia la máquina que realizó la petición, poniendo en el paquete su dirección MAC para que la máquina destino de la respuesta pueda conocer la dirección MAC que necesitaba.

El análisis de la red consiste en reconocer su topología en base al nivel de información que proveen las diferentes IP's, como fuente y como destino, tomando a las IP's como símbolos y estimado su probabilidad de aparición con su frecuencia muestral.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Desarrollo                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Desarrollo}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Resultados                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Resultados}


%% Alto Palermo %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\subsection{Red \emph{Alto Palermo}}

\grafo{altopalermo}


\subsubsection{Información de los símbolos de la fuente de información $S_{src}$}

Donde $S_{src} = \{ \text{direcciones IP origen en paquetes ARP \emph{who-has}} \}$.

\input{altopalermo-source}
\vspace{2cm}


\subsubsection{Información de los símbolos de la fuente de información $S_{dst}$}

Donde $S_{dst} = \{ \text{direcciones IP destino en paquetes ARP \emph{who-has}} \}$.

\input{altopalermo-destination}
\vspace{2cm}


%% McDonald's %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\subsection{Red \emph{McDonald's}}

\grafo{mcdonalds}

\grafo{mcdonalds-172.17.12.2}

\grafo{mcdonalds-172.17.12.1}

\grafo{mcdonalds-172.17.203.1}

\grafo{mcdonalds-0.0.0.0}


\subsubsection{Información de los símbolos de la fuente de información $S_{src}$}

Donde $S_{src} = \{ \text{direcciones IP origen en paquetes ARP \emph{who-has}} \}$.

\input{mcdonalds-source}
\vspace{2cm}


\subsubsection{Información de los símbolos de la fuente de información $S_{dst}$}

Donde $S_{dst} = \{ \text{direcciones IP destino en paquetes ARP \emph{who-has}} \}$.

\input{mcdonalds-destination}
\vspace{2cm}


%% Starbucks %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\subsection{Red \emph{Starbucks}}

\grafo{starbucks}


\subsubsection{Información de los símbolos de la fuente de información $S_{src}$}

Donde $S_{src} = \{ \text{direcciones IP origen en paquetes ARP \emph{who-has}} \}$.

\input{starbucks-source}
\vspace{2cm}


\subsubsection{Información de los símbolos de la fuente de información $S_{dst}$}

Donde $S_{dst} = \{ \text{direcciones IP destino en paquetes ARP \emph{who-has}} \}$.

\input{starbucks-destination}
\vspace{2cm}


%% Entropías calculadas %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\subsection{Entropías calculadas}

% Constantes con la entropía calculada
\input{entropia}

\begin{center}
\begin{tabular}{|c|c|c|}
\hline
Red & Fuente de información modelada $S$ & Entropía $H(S)$\\
\hline
Alto Palermo & $S_{src}$ & \altopalermoSrcEntropy\\
Alto Palermo & $S_{dst}$ & \altopalermoDstEntropy\\
\hline
McDonald's   & $S_{src}$ & \mcdonaldsSrcEntropy\\
McDonald's   & $S_{dst}$ & \mcdonaldsDstEntropy\\
\hline
Starbucks    & $S_{src}$ & \starbucksSrcEntropy\\
Starbucks    & $S_{dst}$ & \starbucksDstEntropy\\
\hline
\end{tabular}
\end{center}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Discusión                      			                                 %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Discusión}


\subsection{Datos encontrados}


\subsubsection{Paquete ARP con IP fuente 0.0.0.0}


Podemos detectar en la red de MC Donalds paquetes ARP Who-Has con ip fuente 0.0.0.0.
La causa de estos ips es debido a lo siguiente:
Cuando un cliente se conecta a un red que posee un servidor DHCP y quiere recibir una IP de esta, manda una petición con su ID en forma de broadcast para que lo detecte el servidor. Una vez detectado por el servidor, este manda una o varias ofertas de IP's a ese ID.
El cliente eventualmente podría recibir la oferta, tomar uno de esos IP's y extraer la dirección del router.
Como el servidor realiza la misma operación con todos los demás clientes que pidan una IP, el cliente debe comprobar que la IP que eligió no la tiene otro cliente. Para esto, coloca en el paquete Who-Has su MAC adress, la ip 0.0.0.0 como fuente para evitar confundir las ARP caches en otros hosts. Si el who-has es respuesto, el cliente rechaza el IP elegido.

%Ver como colocar las referencias
%http://www.ietf.org/rfc/rfc2131.txt
%4.4.1


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Conclusión                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Conclusión}


\end{document}